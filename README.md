# README.md

## Проект: Автоматизация заполнения формы на сайте ITA Matrix

### Описание

Проект демонстрирует, как с использованием Flask и Selenium можно автоматически открыть страницу [https://matrix.itasoftware.com/search](https://matrix.itasoftware.com/search) и заполнить данные в форме. Предполагается, что пользователь развернет локальный веб-сервер и выполнит сценарий через браузер.

---

## Установка окружения

### Предварительные требования

1. Убедитесь, что у вас установлен Python версии 3.7 или выше.
2. Убедитесь, что у вас установлен браузер Google Chrome.

### Шаги установки

1. **Создайте виртуальное окружение:**

   ```bash
   python3 -m venv venv
   source venv/bin/activate  # Для macOS/Linux
   venv\Scripts\activate     # Для Windows
   ```

2. **Установите необходимые библиотеки:**

   ```bash
   pip install flask selenium flask-cors
   ```

3. **Настройте WebDriver:**

   - Скачайте ChromeDriver, соответствующий вашей версии браузера Google Chrome:

     - Для версий Chrome 114+: [https://googlechromelabs.github.io/chrome-for-testing/](https://googlechromelabs.github.io/chrome-for-testing/)
     - Для более ранних версий: [https://developer.chrome.com/docs/chromedriver/downloads?hl=ru](https://developer.chrome.com/docs/chromedriver/downloads?hl=ru)

   - Поместите файл `chromedriver` в папку `drivers/` в корне проекта.

   - Сделайте `chromedriver` исполняемым:

     ```bash
     chmod +x drivers/chromedriver
     ```

---

## Запуск проекта

### 1. Запустите Flask сервер

В корне проекта выполните:

```bash
python app.py
```

### 2. Откройте приложение

Перейдите в браузере по адресу:

```
http://127.0.0.1:5000/
```

### 3. Использование локального HTML-файла

Вы также можете запустить сценарий через локальную HTML-страницу `local_runner.html`. Для этого:

- Откройте файл `local_runner.html` в вашем браузере (например, через `file:///`).
- Нажмите кнопку "Запустить Matrix". Это выполнит тот же сценарий, что и через сервер Flask.

---

## Подключение к уже запущенному браузеру

Если вы хотите запустить сценарий в уже открытом браузере, выполните следующие шаги:

1. **Запустите Chrome с отладкой:**

   ```bash
   /Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --remote-debugging-port=9222 --user-data-dir=/tmp/chrome_debug
   ```

   - `--remote-debugging-port=9222`: Указывает порт для удаленной отладки.
   - `--user-data-dir=/tmp/chrome_debug`: Использует отдельный профиль браузера.

2. **Подключитесь через Flask:**
   В проекте уже настроено подключение к браузеру через порт `9222`.

---

## Описание файлов

- **`templates/index.html`**:
  HTML-шаблон для основной страницы приложения Flask. Предоставляет пользователю кнопку для запуска автоматизации.

- **`local_runner.html`**:
  Отдельный локальный HTML-файл, позволяющий запускать сценарий автоматизации без использования основной страницы Flask. Использует JavaScript для отправки POST-запроса на сервер.

- **`app.py`**:
  Основной серверный файл Flask, обрабатывающий запросы от пользователя. Использует Selenium для автоматического открытия страницы ITA Matrix, заполнения формы и выполнения действий.

- **`Matrix.side`**:
  Файл, созданный в Selenium IDE, содержащий сценарий автоматизации. Служит основой для написания Python-кода в `app.py`, включая выбор CSS-селекторов.

---

## Инструкции для другого разработчика

### Клонирование проекта

1. Склонируйте репозиторий:

   ```bash
   git clone https://github.com/MaxShytov/matrix-ita.git
   ```

2. Установите зависимости и настройте проект, следуя инструкции в разделе "Установка окружения".

### Что можно улучшить:

1. Добавьте функционал для автоматического создания веб-сервера, если его ещё нет.
2. Реализуйте пакетный файл для автоматического обновления проекта из Git и запуска сервера.

---

## Полезные ссылки

1. Документация Selenium: [https://www.selenium.dev/documentation/](https://www.selenium.dev/documentation/)
2. Документация Flask: [https://flask.palletsprojects.com/](https://flask.palletsprojects.com/)
3. Скачивание ChromeDriver:
   - [Версии 114+](https://googlechromelabs.github.io/chrome-for-testing/)
   - [Более ранние версии](https://developer.chrome.com/docs/chromedriver/downloads?hl=ru)

---

## История проекта

1. **Изначальная идея:**

   - Создать проект, который автоматически заполняет форму на сайте ITA Matrix.

2. **Технические решения:**

   - Использование Flask для запуска веб-сервера.
   - Применение Selenium для автоматизации работы с браузером.
   - Подключение `flask-cors` для поддержки запросов с локальных файлов HTML.

3. **Проблемы и их решения:**

   - **Проблема CORS:**
     Решено установкой `flask-cors` и разрешением запросов с любых источников.
   - **Открытие новой вкладки в том же браузере:**
     Реализовано через запуск Chrome с отладкой (`--remote-debugging-port`).

4. **Возможные улучшения:**

   - Добавить тесты для проверки сценариев Selenium.
   - Реализовать поддержку других браузеров (например, Firefox).

---

## Лицензия

Проект доступен под [MIT License](https://opensource.org/licenses/MIT).

